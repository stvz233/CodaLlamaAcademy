<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mocha Chai Tests for CodeLlamaAcademy</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/mocha/mocha.css"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/8.0.1/mocha.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.2.0/chai.min.js"></script>

  </head>
  <body>
    <div id="mocha"></div>
    
    <!-- file to test -->
    <script src="extractor.js"></script>
    <script src="calculate.js"></script>
  
    
    <!--
    Cannot run ollama_helper test becasue we can't import Ollama
    <script src="ollama_helper.js"></script>
    -->
    
    
    <!-- include mocha and chai -->
    <script>
        mocha.setup('bdd');
        const expect = chai.expect;
    </script>

    <!-- unit tests, loaded from file -->
    <script src="unitTest/extractortest.js"></script>
    <script src="unitTest/answertest.js"></script>
    <script src="unitTest/questiontest.js"></script>
    <script src="unitTest/databasetest.js"></script>
    <script src="unitTest/sandboxtest.js"></script>
    <script src="unitTest/calculatetest.js"></script>

    <!--
    Cannot run ollama_helper test becasue we can't import Ollama
    <script src="unitTest/ollamahelpertest.js"></script>
    -->

    <!-- run mocha -->
    <script>
      mocha.run()
    </script>

    <h3>Manual Testing Completed</h3>
    <p>1. When the users first start to use the application, they will see a term of service button when they open the APP,
      and if they click the button, they are able to click a checkbox to agree on it. 
      Once the user checks the box to agree, a login button will appear to the right.
      Only if the checkbox is clicked can the users see the log in button.
    </p>
    
    <p>2. Clicking log in will direct the user to a page where they can log in or sign up for an account. The process is supported by a
      third party called clerk. We have tried both using google and email address to log in and both worked.
    </p>
    
    <p>
      3. After signing in, the button "Exercise" has been tested and it directs the user to the code exercise page. 
      The button "Performance Review" has been tested and successfully directs the users to the performance review page. 
      The button "Admin Mode" has been tested and it directs the users to the admin page only when the password is correctly entered. 
      The button "Profile Page" has been tested and it directs the users to the profile page. 
      The button "Log out" has been tested and correctly log out the users to let
      them see the page where there is the term of service button.
    </p>
    
    <p>
      4. On the code question page, the submit button has been tested and is working correctly. When the submit button is clicked, we get the expected result. User inputs can be viewed from the backend console,
      confirming that the submit button triggers the correct functionality.
    </p>
    
    <p>5. On the code question page, the skip button has been tested and is working correctly. When the skip button is clicked, it moves to the next question.
      User inputs appear as empty in the backend console, and the level of difficulty remains at easy if it was already easy; otherwise, it decreases by one level.
      This confirms that the skip button triggers the correct functionality.
    </p>

    <p>
      6. On the code question page, the level of difficulty tags havve been tested and are working correctly.
      When the user answers an easy question correct, the next question is at a moderate level.
      When the user answers an easy question incorrect, the next question remains easy.
      When the user answers a moderate level question correct, the next question is at a hard level.
      When the user answers a moderate level question incorrect, the next question is at an easy level.
      When the user answers a hard question correct, the next question remains hard.
      When the user answers a hard question incorrect, the next question is at an moderate level.
    </p>

    <p>
      7. On the performance review page and the result page (where the users are directed to when they finished the quiz are tested), 
      the "Go back to Main" button at the top right corner has been tested is working correctly. When the button is clicked, it directs the users to the correct page (main menu page).
    </p>

    <p>
      8. The rows of the table on the performance review page have been tested to be clickable and correctly direct users to the page with detailed quiz results
      for the specific quiz listed in that row. The rows of the table on the detailed performance review page have been tested to be clickable and correctly direct users to the page with detailed quiz results
      for the specific question listed in that row. 
    </p>

    <p>
      9. The "Go to Performance Review" button has been tested and directs user to the correct page (Performance Review page with the score table).
      The "Go to Detailed Performance Review" button has been tested and it directs user to the correct page (Detailed Performance Review page with the quiz results table). 
    </p>

    <p>
      10. The rows of the table on the admin page (User Performance Results table) have been tested to be clickable and correctly directs users to the page with a bar graph showing each user's quiz results.
      The "Go back to Admin Page" button has been tested and it directs user to the correct page (admin page).
    </p>

    <p>
      11. On the profile page, the current username is displayed correctly. When attempting to save a username that already exists in the database, 
      the message "Current Username Has Already Been Taken. Please Select A New Username" is displayed correctly.
      When the username is successfully changed, the message "Username Updated Successfully" is shown, and the username in the database is updated accordingly.
    </p>

    <p>
      12. For callOllama function at the backend in ollama_helper.js, since we successfully recieved response, we know it is generating contents. We have done some unit tests for it, but
      due to the problem with import statement which is not compatible with running Mocha tests in browser, it is not shown here. There is instructions in readme that shows how to run those tests using npm test command.
    </p>

  </body>
</html>
